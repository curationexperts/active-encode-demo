------------------------------------

input_file = 'sample_data.mp4'
pipeline_id = '1490715200916-25b08y'
preset_id = "1351620000001-000061"
output_file = 'output_5.mp4'

encode = ActiveEncode::Base.create(input_file, pipeline_id: pipeline_id, output_key_prefix: "active_encode-demo_app/", outputs: [{ key: output_file, preset_id: preset_id }])

encode.reload.running?
encode.reload.state

------------------------------------
# This currently doesn't work because HD is expecting a local file

I need something like this:

Hydra::Derivatives::VideoDerivatives.create(filename,
  outputs: [{ label: :thumbnail, format: 'jpg', url: derivative_url('thumbnail') },
            { label: 'webm', format: 'webm', url: derivative_url('webm') },
            { label: 'mp4', format: 'mp4', url: derivative_url('mp4') }])

# But for URL service, I need :source

# And I don't think a string file name will work for input_file.  I think it's expecting a FileSet object (maybe?)
# because it's trying to do input_file.send(source_name).uri.to_s

# @option options [Symbol] :source a method that can be called on the object to retrieve the source file

#source_file = ???

#source_file = URI('https://s3.amazonaws.com/avalon-input/sample_data.mp4')
#input_file = URI('https://s3.amazonaws.com/avalon-input/sample_data.mp4')
input_file = 'sample_data.mp4'
pipeline_id = '1490715200916-25b08y'
preset_id = "1351620000001-000061"
output_file = 'output_7.mp4'
#output_1 = { source: source_file, pipeline_id: pipeline_id, output_key_prefix: "active_encode-demo_app/", outputs: [{ key: output_file, preset_id: preset_id }] }
output_1 = { pipeline_id: pipeline_id, output_key_prefix: "active_encode-demo_app/", outputs: [{ key: output_file, preset_id: preset_id }] }
junky = Hydra::Derivatives::ActiveEncodeDerivatives.create(input_file, outputs: [output_1])


------------------------------------
TODO:

* If I set HD to that URL source file service, will AWS work?

* In order to keep both matterhorn and AWS working, can I configure the source file loader class in my demo app?

* Move that local file service to the demo app?

------------------------------------

